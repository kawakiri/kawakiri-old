!function(){"use strict";const t=new Map;class e{_getTransitionDuration(){return 1e3*parseFloat(getComputedStyle(this.elements.root).transitionDuration)}static getData(e){return t.get(e)}static setData(e,s){t.set(e,s)}static hasData(e){return t.has(e)}static deleteData(e){t.delete(e)}static do(t){const e=t.dataset.action;if(void 0===e||""===e)return!1;const s=t.dataset.target;let n;if(n=void 0===s||""===s?t.closest(`.${this.classes.root}`):document.querySelector(s),null===n)return!1;let o=this.getData(n);return void 0===o&&(o=new this(n,t)),o[e]()}}class s extends e{constructor(t){super(),this.elements={root:t},s.setData(t,this)}hide(){return this.elements.root.addEventListener("transitionend",(()=>{this.elements.root.remove()}),{once:!0}),this.elements.root.classList.add(s.classes.hidden),s.deleteData(this.elements.root),!0}static _onClick(t){const e=t.target;"alert"===e.dataset.component&&window.kawakiri.Alert.do(e)}static init(){document.addEventListener("click",this._onClick)}}s.componentName="alert",s.classes={root:"alert",hidden:"alert--hidden"};class n extends e{constructor(t,e){super(),this.elements={root:t,dialog:t.querySelector(`.${n.classes.dialog}`),button:e},t.tabIndex=-1,this._transitionDuration=this._getTransitionDuration(),n.setData(t,this)}_getScrollbarWidth(){return window.innerWidth-document.documentElement.clientWidth}_onOutsideClick(t){null===t.target.closest(`.${n.classes.dialog}`)&&n.shown.hide()}_onEscapeKeydown(t){"Escape"===t.key&&n.shown.hide()}_onFocusin(t){null===t.target.closest(`.${n.classes.root}`)&&t.relatedTarget.focus()}show(){if(this.elements.root.classList.contains(n.classes.shown))return!1;null!==n.shown&&n.shown.hide(),n.shown=this;const t=this._getScrollbarWidth();return 0!==t&&(document.body.style.paddingRight=t+"px"),this.elements.root.addEventListener("transitionend",(()=>{this.elements.root.focus()}),{once:!0}),document.body.classList.add(n.classes.modalBody),this.elements.root.style.display="flex",setTimeout((()=>this.elements.root.classList.add(n.classes.shown)),100),document.addEventListener("click",this._onOutsideClick),document.addEventListener("keydown",this._onEscapeKeydown),document.addEventListener("focusin",this._onFocusin),!0}hide(){return!!this.elements.root.classList.contains(n.classes.shown)&&(document.removeEventListener("click",this._onOutsideClick),document.removeEventListener("keydown",this._onEscapeKeydown),document.removeEventListener("focusin",this._onFocusin),this.elements.root.addEventListener("transitionend",(t=>{document.body.style.paddingRight="",document.body.classList.remove(n.classes.modalBody),t.target.scrollTop=0,this.elements.root.style.display="",this.elements.button.focus()}),{once:!0}),this.elements.root.classList.remove(n.classes.shown),n.shown=null,!0)}toggle(){return this.show()||this.hide()}static _onClick(t){const e=t.target;"modal"===e.dataset.component&&window.kawakiri.Modal.do(e)}static init(){document.addEventListener("click",this._onClick)}}n.componentName="modal",n.classes={root:"modal",shown:"modal--shown",dialog:"modal__dialog",modalBody:"modal-body"},n.shown=null;class o extends e{constructor(t){super(),this.elements={root:t,button:t.querySelector("."+o.classes.button),content:t.querySelector("."+o.classes.content)},o.setData(t,this)}_onOutsideClick(t){null===t.target.closest("."+o.classes.content)&&o.shown.hide()}_onEscapeKeydown(t){"Escape"===t.key&&(o.shown.elements.button.focus(),o.shown.hide())}_onTabKeydown(t){"Tab"!==t.key||null!==document.activeElement&&null!==document.activeElement.closest("."+o.classes.content)||o.shown.hide()}show(){if(this.elements.content.classList.contains(o.classes.shownContent))return!1;null!==o.shown&&o.shown.hide(),o.shown=this;const t=this.elements.button.getBoundingClientRect();return t.top>document.documentElement.clientHeight-t.bottom?this.elements.content.classList.add(o.classes.upContent):this.elements.content.classList.add(o.classes.downContent),this.elements.content.classList.add(o.classes.shownContent),document.addEventListener("click",this._onOutsideClick),document.addEventListener("keydown",this._onEscapeKeydown),document.addEventListener("keyup",this._onTabKeydown),!0}hide(){return!!this.elements.content.classList.contains(o.classes.shownContent)&&(document.removeEventListener("click",this._onOutsideClick),document.removeEventListener("keydown",this._onEscapeKeydown),document.removeEventListener("keyup",this._onTabKeydown),this.elements.content.classList.remove(o.classes.shownContent),this.elements.content.classList.remove(o.classes.upContent),this.elements.content.classList.remove(o.classes.downContent),o.shown=null,!0)}toggle(){return this.show()||this.hide()}static _onClick(t){const e=t.target;"popup"===e.dataset.component&&window.kawakiri.Popup.do(e)}static init(){document.addEventListener("click",this._onClick)}}o.componentName="popup",o.classes={root:"popup",button:"popup__button",content:"popup__content",upContent:"popup__content--up",downContent:"popup__content--down",shownContent:"popup__content--shown"},o.shown=null;new class{constructor(t){window.kawakiri=this;for(const e of t)this[e.name]=e,e.init()}}([s,n,o])}();